<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="Y0C1UF4FAEedNCMjLTIm48uKmKyrqhZta6vAU7kQ_kw" />

    
      <meta name="robots" content="noindex">
    

    
    
    

    <title>Resumable upload protocol 0.2.x | tus</title>

    <link rel="shortcut icon" href="/assets/img/favicon.png">
    <link rel="apple-touch-icon" href="/assets/img/favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="/assets/build/vendors~app.7b5ef8790937472c1a8f.86bcdec2dc26e9c37e22.chunk.css" rel="stylesheet"><link href="/assets/build/app.d7a7cf28f20683432f38.css" rel="stylesheet">
    <link type="application/atom+xml" rel="alternate" href="https://tus.io/blog.atom" />

    <!-- Twitter follow button script -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </head>

  <body>
    
    
    

    <div class="wrapper">
      <div class="TransloaditBar">
        <div class="container">
          <div class="TransloaditBar-about">
            <a class="TransloaditBar-logo" href="https://transloadit.com/" target="_blank" rel="noopener noreferrer">
              <img class="TransloaditBar-logoImg" src="/assets/img/transloadit-white-glyph.svg" width="20" height="20" alt="Transloadit">
            </a>
            <span>tus is an open source project by <a class="TransloaditBar-link" href="https://transloadit.com/" target="_blank">Transloadit</a></span>
          </div>
          <div class="TransloaditBar-info">
            <b>New: </b><a href="https://www.transloadit.com/pricing" class="TransloaditBar-info-link">Transloadit Community Plan</a> — get free hosted Companion &amp; tusd, unlimited uploading, and 5GB/month encoding traffic!
          </div>
        </div>
      </div>

      <div class="header">
        <a href="https://github.com/tus" class="github-corner" aria-label="View source on GitHub"><svg width="64" height="64" viewBox="0 0 250 250" style="fill:#48aa92; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

        <div class="container">
          <div class="row">
            <div class="three columns logo-container">
              <h3 class="logo">
                <a href="/">
                  
                    <img src="/assets/img/favicon.png" class="shield" alt="tus" />
                  

                  <img src="/assets/img/tus8.png" alt="tus" />
                </a>
              </h3>
            </div>

            <div class="nine columns nav-container">
              <a href="#" class="toggler">
                <span class="hamburger">&#8801;</span>
                <span class="cross">&#10005;</span>
              </a>

              <ul class="nav">
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload/0-2-x.html.html" href="/faq.html">FAQ</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload/0-2-x.html.html" href="/support.html">Support</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload/0-2-x.html.html" href="/blog.html">Blog</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload/0-2-x.html.html" href="/demo.html">Demo</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="active">
                    <a data-pageUrlHtml="/protocols/resumable-upload/0-2-x.html.html" href="/protocols/resumable-upload.html">Protocol</a>
                  </li>
                
                  
                  
                  
                  
                  <li class="">
                    <a data-pageUrlHtml="/protocols/resumable-upload/0-2-x.html.html" href="/implementations.html">Implementations</a>
                  </li>
                
                <li class="github-menu-item"><a href="https://github.com/tus">GitHub</a></li>
              </ul>

              <div class="u-cf"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="content">
        
          <div class="container">
        

          <div class="protocol">
  <h1>
    Protocol
  </h1>

  
  <div class="protocol-version">
    Version
    <select id="js-version-select">
      
        <option value="/protocols/resumable-upload.html" >1.0.x</option>
      
        <option value="/protocols/resumable-upload/0-2-x.html" selected>0.2.x</option>
      
        <option value="/protocols/resumable-upload/0-1-x.html" >0.1.x</option>
      
    </select>
  </div>

  <p class="lead">
    This document contains the specification for the tus protocol which lays out exactly how tus clients and servers must behave. If you want a less formal and more intuitive introduction, we recommend you to also have a look at our <a href="/faq.html">FAQ</a>.
  </p>

  
    <p class="alert" id="js-support-alert">
      <b>Warning!</b> This is the specification for an old and outdated version of tus, and should only be used for comparisions. The latest version of the tus protocol can be found <a href="/protocols/resumable-upload.html">here</a>.
    </p>
  

  <!-- Use `make inject-protocol` to fetch latest protocol version -->
  <div class="kramdown-toc">
<ul id="markdown-toc">
  <li><a href="#status" id="markdown-toc-status">Status</a></li>
  <li><a href="#contributing" id="markdown-toc-contributing">Contributing</a></li>
  <li><a href="#abstract" id="markdown-toc-abstract">Abstract</a></li>
  <li><a href="#notation" id="markdown-toc-notation">Notation</a></li>
  <li><a href="#core-protocol" id="markdown-toc-core-protocol">Core Protocol</a>    <ul>
      <li><a href="#example" id="markdown-toc-example">Example</a></li>
      <li><a href="#headers" id="markdown-toc-headers">Headers</a>        <ul>
          <li><a href="#offset" id="markdown-toc-offset">Offset</a></li>
        </ul>
      </li>
      <li><a href="#requests" id="markdown-toc-requests">Requests</a>        <ul>
          <li><a href="#head" id="markdown-toc-head">HEAD</a></li>
          <li><a href="#patch" id="markdown-toc-patch">PATCH</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#protocol-extensions" id="markdown-toc-protocol-extensions">Protocol Extensions</a>    <ul>
      <li><a href="#file-creation" id="markdown-toc-file-creation">File Creation</a>        <ul>
          <li><a href="#example-1" id="markdown-toc-example-1">Example</a></li>
          <li><a href="#headers-1" id="markdown-toc-headers-1">Headers</a>            <ul>
              <li><a href="#final-length" id="markdown-toc-final-length">Final-Length</a></li>
            </ul>
          </li>
          <li><a href="#requests-1" id="markdown-toc-requests-1">Requests</a>            <ul>
              <li><a href="#post" id="markdown-toc-post">POST</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#checksums" id="markdown-toc-checksums">Checksums</a></li>
      <li><a href="#parallel-chunks" id="markdown-toc-parallel-chunks">Parallel Chunks</a></li>
      <li><a href="#metadata" id="markdown-toc-metadata">Metadata</a></li>
      <li><a href="#streams" id="markdown-toc-streams">Streams</a></li>
    </ul>
  </li>
  <li><a href="#faq" id="markdown-toc-faq">FAQ</a>    <ul>
      <li><a href="#why-is-the-protocol-using-custom-headers" id="markdown-toc-why-is-the-protocol-using-custom-headers">Why is the protocol using custom headers?</a></li>
      <li><a href="#why-are-you-not-using-the-x--prefix-for-your-headers" id="markdown-toc-why-are-you-not-using-the-x--prefix-for-your-headers">Why are you not using the “X-“ prefix for your headers?</a></li>
      <li><a href="#how-can-i-deal-with-bad-http-proxies" id="markdown-toc-how-can-i-deal-with-bad-http-proxies">How can I deal with bad http proxies?</a></li>
      <li><a href="#how-are-pauseresume-handled-when-should-i-delete-partial-uploads" id="markdown-toc-how-are-pauseresume-handled-when-should-i-delete-partial-uploads">How are pause/resume handled? When should I delete partial uploads?</a></li>
    </ul>
  </li>
  <li><a href="#license" id="markdown-toc-license">License</a></li>
</ul>

</div>

<p><strong>Version:</strong> 0.2 (<a href="http://semver">SemVer</a>)<br />
<strong>Date:</strong> 2013-04-15<br />
<strong>Authors:</strong> <a href="https://twitter.com/felixge">Felix Geisendörfer</a>, <a href="https://twitter.com/kvz">Kevin van
Zonneveld</a>, <a href="https://twitter.com/tim_kos">Tim Koschützki</a></p>

<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be
interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</p>

<h2 id="status">Status</h2>

<p>This protocol is under development and is not ready for general adoption yet.</p>

<p>The goal is to have a 1.0 release candidate in a few weeks, at which point only
minor revisions will be made to the protocol. After a few months 1.0 will be
frozen, and changes will be considered very carefully. Ideally there will be no
need for a version 2.0.</p>

<h2 id="contributing">Contributing</h2>

<p>This protocol is authored and owned by the tus community. We welcome patches
and feedback via
<a href="https://github.com/tus/tus-resumable-upload-protocol">Github</a>. All contributors
will be listed as authors.</p>

<p>Please also let us know about any implementations (open source or commercial)
if you’d like to be listed on the
<a href="http://www.tus.io/implementations.html">implementations</a> page.</p>

<h2 id="abstract">Abstract</h2>

<p>The protocol provides a mechanism for resumable file uploads via HTTP 1.1 (<a href="http://tools.ietf.org/html/rfc2616">RFC
2616</a>).</p>

<h2 id="notation">Notation</h2>

<p>Characters enclosed by square brackets indicate a placeholder (e.g. <code class="language-plaintext highlighter-rouge">[size]</code>).</p>

<h2 id="core-protocol">Core Protocol</h2>

<p>The core protocol describes how to resume an interrupted upload. It assumes that
you already have a URL for the upload, usually created via the <a href="#file-creation">File
Creation</a> extension.</p>

<p>All clients and servers MUST implement the core protocol.</p>

<h3 id="example">Example</h3>

<p>A HEAD request is used to determine the offset at which the upload should be
continued.</p>

<p>The example below shows the continuation of a 100 byte upload that was
interrupted after 70 bytes were transfered.</p>

<p><strong>Request:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HEAD /files/24e533e02ec3bc40c387f1a0e460e216 HTTP/1.1
Host: tus.example.org
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 Ok
Offset: 70
</code></pre></div></div>

<p>Given the offset, the client uses the PATCH method to resume the upload:</p>

<p><strong>Request:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATCH /files/24e533e02ec3bc40c387f1a0e460e216 HTTP/1.1
Host: tus.example.org
Content-Length: 30
Offset: 70

[remaining 30 bytes]
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 Ok
</code></pre></div></div>

<h3 id="headers">Headers</h3>

<h4 id="offset">Offset</h4>

<p>The <code class="language-plaintext highlighter-rouge">Offset</code> header is a request and response header that indicates a byte
offset within a resource. The value MUST be an integer that is <code class="language-plaintext highlighter-rouge">0</code> or larger.</p>

<h3 id="requests">Requests</h3>

<h4 id="head">HEAD</h4>

<p>Servers MUST always return an <code class="language-plaintext highlighter-rouge">Offset</code> header for <code class="language-plaintext highlighter-rouge">HEAD</code> requests against a tus
resource, even if it is <code class="language-plaintext highlighter-rouge">0</code>, or the upload is already considered completed.</p>

<h4 id="patch">PATCH</h4>

<p>Servers MUST accept <code class="language-plaintext highlighter-rouge">PATCH</code> requests against any tus resource and apply the
bytes contained in the message at the given <code class="language-plaintext highlighter-rouge">Offset</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">Offset</code> value SHOULD be equal, but MAY also be smaller than the current
offset of the resource, and servers MUST handle <code class="language-plaintext highlighter-rouge">PATCH</code> operations containing
the same data at the same absolute offsets idempotently. The behavior of using
<code class="language-plaintext highlighter-rouge">Offset</code> values larger than the current upload offset is undefined, see the
<a href="#parallel-chunks">Parallel Chunks</a> extension.</p>

<p>Clients SHOULD send all remaining bytes of a resource in a single <code class="language-plaintext highlighter-rouge">PATCH</code>
request, but MAY also use multiple small requests for scenarios where this is
desirable (e.g. NGINX buffering requests before they reach their backend).</p>

<p>Servers MUST acknowledge successful <code class="language-plaintext highlighter-rouge">PATCH</code> operations using a <code class="language-plaintext highlighter-rouge">200 Ok</code> status,
which implicitly means that clients can assume that the new <code class="language-plaintext highlighter-rouge">Offset</code> = <code class="language-plaintext highlighter-rouge">Offset</code>
+ <code class="language-plaintext highlighter-rouge">Content-Length</code>.</p>

<p>Both clients and servers SHOULD attempt to detect and handle network errors
predictably. They may do so by checking for read/write socket errors, as well
as setting read/write timeouts. Both clients and servers SHOULD use a 30 second
timeout. A timeout SHOULD be handled by closing the underlaying connection.</p>

<p>Servers SHOULD always attempt to process partial message bodies in order to
store as much of the received data as possible.</p>

<p>Clients SHOULD use a randomized exponential back off strategy after
encountering a network error or receiving a <code class="language-plaintext highlighter-rouge">500 Internal Server Error</code>. It is
up to the client to decide to give up at some point.</p>

<h2 id="protocol-extensions">Protocol Extensions</h2>

<p>Clients and servers are encouraged to implement as many of the extensions
described below as possible. There is no feature detection for clients, instead
they should allow individual extensions to be enabled/disabled in order to
match the available server features.</p>

<h3 id="file-creation">File Creation</h3>

<p>All clients and servers SHOULD implement the file creation API. In cases where
that does not make sense, a custom mechanism may be used instead.</p>

<h4 id="example-1">Example</h4>

<p>An empty POST request is used to create a new upload resource. The
<code class="language-plaintext highlighter-rouge">Final-Length</code> header indicates the final size of the file.</p>

<p><strong>Request:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /files HTTP/1.1
Host: tus.example.org
Content-Length: 0
Final-Length: 100
</code></pre></div></div>

<p><strong>Response:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 201 Created
Location: http://tus.example.org/files/24e533e02ec3bc40c387f1a0e460e216
</code></pre></div></div>

<p>The new resource has an implicit offset of <code class="language-plaintext highlighter-rouge">0</code> allowing the client to use the
core protocol for performing the actual upload.</p>

<h4 id="headers-1">Headers</h4>

<h5 id="final-length">Final-Length</h5>

<p>The <code class="language-plaintext highlighter-rouge">Final-Length</code> header indicates the final size of a new resource in bytes.
This way a server will implicitly know when a file has completed uploading.</p>

<h4 id="requests-1">Requests</h4>

<h5 id="post">POST</h5>

<p>Clients MUST use a <code class="language-plaintext highlighter-rouge">POST</code> against a well known file creation url to request the
creation of a new file resource. The request MUST include a <code class="language-plaintext highlighter-rouge">Final-Size</code>
header.</p>

<p>Servers MUST acknowledge a successful file creation request with a <code class="language-plaintext highlighter-rouge">201
Created</code> response code and include an absolute url for the created resource in
the <code class="language-plaintext highlighter-rouge">Location</code> header.</p>

<p>Clients then continue to perform the actual upload of the file using the core
protocol.</p>

<h3 id="checksums">Checksums</h3>

<p>This extension will define how to provide per file or per chunk checksums for
uploaded files.</p>

<h3 id="parallel-chunks">Parallel Chunks</h3>

<p>This extension will define how to upload several chunks of a file in parallel in
order to overcome the throughput limitations of individual tcp connections.</p>

<h3 id="metadata">Metadata</h3>

<p>This extension will define how to provide meta information when uploading files.</p>

<h3 id="streams">Streams</h3>

<p>This extension will define how to upload finite streams of data that have an
unknown length at the beginning of the upload.</p>

<h2 id="faq">FAQ</h2>

<h3 id="why-is-the-protocol-using-custom-headers">Why is the protocol using custom headers?</h3>

<p>We have carefully investigated the use of existing headers such as <code class="language-plaintext highlighter-rouge">Range</code> and
<code class="language-plaintext highlighter-rouge">Content-Range</code>, but unfortunately they are defined in a way that makes them
unsuitable for resumable file uploads.</p>

<p>We also considered using existing <code class="language-plaintext highlighter-rouge">PATCH</code> payload formats such as
<a href="http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p5-range-latest.html#internet.media.type.multipart.byteranges">multipart/byteranges</a>,
but unfortunately the XHR2 <a href="http://www.w3.org/TR/XMLHttpRequest/#interface-formdata">FormData
interface</a> does not
support custom headers for multipart parts, and the <a href="http://www.w3.org/TR/XMLHttpRequest/#the-send-method">send()
method</a> does not allow
streaming arbitrary data without loading all of it into memory.</p>

<p>That being said, custom headers also allowed us to greatly simplify the
implementation requirements for clients and servers, so we’re quite happy with
them.</p>

<h3 id="why-are-you-not-using-the-x--prefix-for-your-headers">Why are you not using the “X-“ prefix for your headers?</h3>

<p>The “X-“ prefix for headers has been deprecated, see <a href="http://tools.ietf.org/html/rfc6648">RFC
6648</a>.</p>

<h3 id="how-can-i-deal-with-bad-http-proxies">How can I deal with bad http proxies?</h3>

<p>If you are dealing with http proxies that strip/modify http headers or can’t
handle <code class="language-plaintext highlighter-rouge">PATCH</code> requests properly, you should consider using https which will
make it impossible for proxies to modify your requests.</p>

<p>If that is not an option for you, please reach out to us, we are open to
defining a compatibility protocol extension.</p>

<h3 id="how-are-pauseresume-handled-when-should-i-delete-partial-uploads">How are pause/resume handled? When should I delete partial uploads?</h3>

<p>Needs to be written …</p>

<h2 id="license">License</h2>

<p>Licensed under the MIT license, see
<a href="https://github.com/tus/tus-resumable-upload-protocol/blob/master/LICENSE.txt">LICENSE.txt</a>.</p>

<p>Copyright (c) 2013 Transloadit Ltd and Contributors.</p>

</div>


        
          </div>
        
      </div>

      
    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3306079-17']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">
      window.tusdEndpoint = '';
    </script>

    <script src="/assets/build/vendors~app.4dfff3fea7b1763d721a.86bcdec2dc26e9c37e22.chunk.js"></script><script src="/assets/build/app.5f5a3cde7cdbe4ac482b.js"></script>
  </body>
</html>
